<!DOCTYPE html>
<html lang="it" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="icon" href="/images/favicon.png" type="image/png" />
    <meta name="theme-color" content="#70b1bb">
    <meta name="author" content="Pietrantuono Alfio">
    <link rel="stylesheet" type="text/css" href="/css/md-layout.css" />
    <link rel="stylesheet" type="text/css" href="/css/material-icons.css" />
    <link rel="stylesheet" type="text/css" href="/css/md-loader.css" />
    <link rel="stylesheet" type="text/css" href="/css/md-controls.css" />
    <link rel="stylesheet" type="text/css" href="/css/md-drawer.css" />
    <link rel="stylesheet" type="text/css" href="/css/md-inputs.css" />
    <link rel="stylesheet" type="text/css" href="/css/report-layout.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/layouts.css" />
    <link rel="stylesheet" type="text/css" href="css/timeline.css" />
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="/js/Application.js"></script>
    <script src="/js/Timeline.js"></script>
    <script src="/js/lib.js"></script>
    <script src="/js/Storage.js"></script>
    <script src="/js/Page.js"></script>
    <script src="/js/Cube.js"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>Mapping Database</title>
  </head>
  <body>

    <dialog id="cube-name">
      <div class="dialog-save-name">

        <div class="md-field">
          <input type="text" id="cubeName" value=""/>
          <label for="cubeName" class="">Titolo Cubo</label>
        </div>

      </div>

      <div class="dialog-buttons">
        <button type="button" name="cancel" class="md-button">annulla</button>
        <button id="btnCubeSaveName" type="button" name="done" class="md-button">Salva</button>
      </div>

    </dialog>

    <dialog id="dimension-name">
      <div class="dialog-save-name">

        <div class="md-field">
          <input type="text" id="dimensionName" value=""/>
          <label for="dimensionName" class="">Titolo dimensione</label>
        </div>

      </div>

      <div class="dialog-buttons">
        <button type="button" name="cancel" class="md-button">annulla</button>
        <button id="btnDimensionSaveName" type="button" name="done" class="md-button">Salva</button>
      </div>

    </dialog>

    <dialog id="hierarchy-name">
      <div class="dialog-save-name">

        <div class="md-field">
          <input type="text" id="hierarchyName" value=""/>
          <label for="hierarchyName" class="">Titolo Gerarchia</label>
        </div>

      </div>

      <div class="dialog-buttons">
        <button type="button" name="cancel" class="md-button">annulla</button>
        <button id="btnHierarchySaveName" type="button" name="done" class="md-button">Salva</button>
      </div>
    </dialog>

    <dialog id="column-setting" class="dialog-columns">
      <section>
        <h4>Formattazione e alias di colonna <span id="fieldName" class="highlight"></span></h4>

        <div class="name-alias">

          <div class="md-field">
            <input type="text" id="alias-column" value=""/>
            <label for="alias-column" class="">Alias</label>
          </div>
        </div>

        <div class="formulaDefine">

          <section class="formula">
            <textarea name="columnFormat" rows="8" cols="80"></textarea>

          </section>

        </div>

        <div class="dialog-buttons">
          <button type="button" name="cancel" class="md-button">annulla</button>
          <button id="btnColumnDone" type="button" name="done" class="md-button">ok</button>
        </div>

      </section>

    </dialog>

    <dialog id="groupby-setting" class="dialog-groupby">
      <section>
        <h4>Formattazione personalizzata GroupBy per <span id="fieldName" class="highlight"></span></h4>

        <div class="formulaDefine">

          <section class="formula">
            <textarea name="groupbyFormat" rows="8" cols="80"></textarea>
          </section>

        </div>



        <div class="dialog-buttons">
          <button type="button" name="cancel" class="md-button">annulla</button>
          <button id="btnGroupByDone" type="button" name="done" class="md-button">ok</button>
        </div>

      </section>

    </dialog>

    <dialog id="filter-setting" class="dialog-filters">
      <section>
        <h4>Inserisci qui la condizione di filtro per la colonna <span id="fieldName" class="highlight"></span></h4>
        <div class="md-field">
          <input type="text" id="filter-name" value=""/>
          <label for="filter-name" class="">Nome</label>
        </div>

        <div class="formulaDefine">

          <section class="formula">
            <h6>SQL operatori</h6><small>Scorri la lista degli operatori</small>
            <div class="listContent">
              <ul id="operator-list" class="miniList">
                <li label="=" selected>&equals;</li>
                <li label="<>">&lt;&gt;</li>
                <li label="<">&lt;</li>
                <li label=">">&gt;</li>
                <li label="IN">IN()</li>
                <li label="NOT IN">NOT IN()</li>
                <li label="IS NULL">IS NULL</li>
                <li label="IS NOT NULL">IS NOT NULL</li>
              </ul>
            </div>
          </section>

          <section class="values">
            <h6>Valori</h6>
            <div class="listContent">
              <div class="md-field">
                <input type="text" id="filter-values" value=""/>
                <label for="filter-values" class="">Valore</label>
              </div>
            </div>
            <!-- TODO: recuperare i possibili valori da inserire dalla query distinct di questa colonna -->

          </section>

        </div>

        <div class="dialog-buttons">
          <button type="button" name="cancel" class="md-button">annulla</button>
          <button id="btnFilterDone" type="button" name="done" class="md-button">ok</button>
        </div>
      </section>
      <!-- <div> -->
      <!-- TODO: si può aggiungere in futuro per filtri più complessi -->
        <!-- <textarea id="sql-filter" name="sql" rows="5" cols="33" placeholder="Inserisci qui la condizione di filtro"></textarea>
      </div> -->
    </dialog>

    <dialog id="metric-setting" class="dialog-metrics">
      <section>
        <h4>Inserisci qui la funzione per la metrica <span id="fieldName" class="highlight"></span></h4>

        <div class="name-alias">
          <div class="md-field">
            <input type="text" id="metric-name" value=""/>
            <label for="metric-name" class="">Nome</label>
          </div>

          <div class="md-field">
            <input type="text" id="alias-metric" value=""/>
            <label for="alias-metrics" class="">Alias</label>
          </div>
        </div>

        <div class="formulaDefine">

          <section class="formula">
            <h6>SQL Function</h6><small>Scorri la lista delle SQL function</small>
            <div class="listContent">
              <ul id="function-list" class="miniList">
                <li id="0" selected>SUM</li>
                <li id="1">COUNT</li>
                <li id="2">AVG</li>
                <li id="3">MAX</li>
                <li id="4">MIN</li>
              </ul>
            </div>
            <label class="mdc-checkbox">
              <input id="checkbox-distinct" type="checkbox" name="distinct-checkbox"/>
              <span>DISTINCT</span>
            </label>

          </section>


          <section class="filtersList">
            <h6>Lista Filtri</h6><small>Filtri da applicare alla metrica</small>
            <div class="listContent">
              <ul id="metric-filters"></ul>
            </div>

          </section>

        </div>



        <div class="dialog-buttons">
          <button type="button" name="cancel" class="md-button">annulla</button>
          <button id="btnMetricDone" type="button" name="done" class="md-button">ok</button>
        </div>

      </section>


      <!-- <div> -->
      <!-- TODO: si può aggiungere in futuro per filtri più complessi -->
        <!-- <textarea id="sql-filter" name="sql" rows="5" cols="33" placeholder="Inserisci qui la condizione di filtro"></textarea>
      </div> -->
    </dialog>

    <dialog id="table-list">
      <div class="lists">
        <div class="list">
          <div class="md-field">
            <input type="search" id="tableSearch" name="tableSearch" value=""/>
            <label for="tableSearch" class="">Ricerca</label>
          </div>

          <ul id="tables"></ul>
        </div>
      </div>

      <div class="dialog-buttons">
        <button type="button" name="cancel" class="md-button">annulla</button>
      </div>
    </dialog>

    <dialog id="dialog-report-list">
      <div class="lists">
        <div class="list">
          <div class="md-field">
            <input type="search" id="cubeSearch" value=""/>
            <label for="cubeSearch" class="">Ricerca</label>
          </div>

          <ul id="cubesList"></ul>
        </div>
      </div>
    </dialog>

    <dialog id="dialog-col-setting">
      <section>
        <h4>personalizzazione colonna</h4>
        <input type="checkbox" name="colHidden" checked="false">Visualizza/Nascondi

      </section>
    </dialog>

    <main>
      <div id="drawer">

        <section class="account"><h5>user</h5><i class="material-icons md-light">person</i></section>

        <nav>
          <a href="#" title="Il mio Profilo" onclick="App.menuOpen('profile/')"><i class="material-icons md-18">person</i><span>elem 1</span></a>

          <a href="" title="Impostazioni"><i class="material-icons md-18">settings</i><span>elem 2</span></a>

          <!-- <a href="" title="Logout"><i class="material-icons md-18">power_settings_new</i><span>Logout</span></a> -->

        </nav>

      </div>

      <header>
        <div class="nav-button"> <!-- codelab-nav-button-->
          <a href="/" id="arrow-back"><i class="material-icons md-light">close</i></a>
          <a href="#" id="menu" onclick="App.menu()"><i class="material-icons md-light">menu</i></a>

        </div>

        <h1 class="title"></h1>
      </header>

      <div id="container" data-page="1">

        <div id="content">
          <div id="body" hidden>

            <!-- Creazione gerarchie -->
            <div id="pages" data-step="1">

              <section class="page" selected data-step="1">
                <h2>Step 1 - Map dimensioni</h2>
                <section>
                  <h3>Creazione della struttura gerarchica</h3>
                  <h5>Selezionare le tabelle da includere per completare la struttura fino alla tabella dei fatti</h5>

                  <div class="timelineContent" id="layout-timeline-0">

                    <div class="timelineContainer">
                      <template id="circle-timeline">
                        <span id=""><span class="infoCircle"><small class="popup">reference 1</small><small class="popup">reference 2</small></span></span>
                      </template>
                      <div class="timeline"></div>

                      <div class="timelineOverflow" data-elements="1">
                        <template id="template-element">
                          <div class="" data-id="" element info>
                            <div class="" sub-element>
                              <div class="card">
                                <div class="card-layout">
                                  <section class="card-table" active="true">
                                    <div class="help">Seleziona una tabella per iniziare</div>
                                    <h6>SELEZIONA TABELLA</h6>
                                    <div class="md-field" hidden>
                                      <input type="text" value=""/>
                                      <label for="searchColumns" class="">Ricerca</label>
                                    </div>

                                    <ul id="columns">
                                      <template id="template-list-columns">
                                        <div class="element">
                                          <li></li>
                                          <i id="hierarchy-icon" class="material-icons md-18">insert_link</i>
                                          <i id="columns-icon" class="material-icons md-18">view_list</i>
                                          <i id="filters-icon" class="material-icons md-18">filter_list</i>
                                          <i id="groupby-icon" class="material-icons md-18">dynamic_feed</i>
                                          <i id="metrics-icon" class="material-icons md-18">show_chart</i>
                                        </div>
                                      </template>
                                    </ul>
                                  </section>

                                  <section options>
                                    <span class="popupContent"><i class="material-icons md-18" columns>view_list</i><small class="popup">Colonna</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" filters>filter_list</i><small class="popup">Filtro</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" groupby>dynamic_feed</i><small class="popup">Raggruppamento</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" metrics>show_chart</i><small class="popup">Metrica</small></span>
                                  </section>
                                </div>
                              </div>
                            </div>
                          </div>
                        </template>

                        <div class="timelineTranslate" data-x="0">
                          <div class="" data-id="1" element info>
                            <div class="" sub-element>
                              <div class="card">
                                <div class="card-layout">
                                  <section class="card-table" active="true">
                                    <div class="help">Seleziona una tabella per iniziare</div>
                                    <h6>SELEZIONA TABELLA</h6>
                                    <div class="md-field" hidden>
                                      <input type="text" value=""/>
                                      <label for="searchColumns" class="">Ricerca</label>
                                    </div>

                                    <ul id="columns">
                                      <template id="template-list-columns">
                                        <div class="element">
                                          <li></li>
                                          <i id="hierarchy-icon" class="material-icons md-18">insert_link</i>
                                          <i id="columns-icon" class="material-icons md-18">view_list</i>
                                          <i id="filters-icon" class="material-icons md-18">filter_list</i>
                                          <i id="groupby-icon" class="material-icons md-18">dynamic_feed</i>
                                          <i id="metrics-icon" class="material-icons md-18">show_chart</i>
                                        </div>
                                      </template>
                                    </ul>
                                  </section>
                                  <section options>
                                    <span class="popupContent"><i class="material-icons md-18" columns>view_list</i><small class="popup">Colonna</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" filters>filter_list</i><small class="popup">Filtro</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" groupby>dynamic_feed</i><small class="popup">Raggruppamento</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" metrics>show_chart</i><small class="popup">Metrica</small></span>
                                  </section>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>

                    </div>

                    <div class="relation">
                      <div class="icon-relation">
                        <span class="popupContent"><i id="add" class="material-icons md-24" add>add</i><small class="popup">Aggiungi tabella</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies>insert_link</i><small class="popup">Crea Relazione</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-left>flip</i><small class="popup">Left Join</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-right>flip</i><small class="popup">Right Join</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-remove>link_off</i><small class="popup">Rimuovi relazione</small></span>
                      </div>
                    </div>

                  </div>

                  <div class="structure">

                    <!-- <div class="lists">
                      <div class="list">
                        <div class="md-field">
                          <input type="search" id="dimensionSearch" value=""/>
                          <label for="dimensionSearch" class="">Ricerca</label>
                        </div>

                        <ul id="dimensionsList"></ul>
                      </div>
                    </div> -->

                    <div class="actions">
                      <span class="popupContent"><i class="material-icons md-24">playlist_add</i><small class="popup">Nuova gerarchia</small></span>
                      <span class="popupContent"><i class="material-icons md-24">playlist_add_check</i><small class="popup">Salva gerarchia</small></span>
                      <span class="popupContent"><i id="saveDimension" class="material-icons md-24 brown">save</i><small class="popup">Salva dimensione</small></span>
                    </div>
                  </div>
                </section>
              </section>

              <section class="page" data-step="2">
                <h2>Step 2 - Tabella FACT</h2>
                <section>
                  <h3>Associazione con la FACT table</h3>
                  <h5>description</h5>

                  <div class="timelineContent" id="layout-timeline-1">
                    <div class="timelineContainer">
                      <template id="circle-timeline">
                        <span id=""><span class="infoCircle"><small class="popup">reference 1</small><small class="popup">reference 2</small></span></span>
                      </template>
                      <div class="timeline"></div>

                      <div class="timelineOverflow" data-elements="1">

                        <div class="timelineTranslate" data-x="0">
                          <!-- qui verrà inserita la tabella clonata (ultima tabella della relazione) -->
                          <div class="" data-id="2" element info>
                            <div class="" sub-element>
                              <div class="card" id="fact-card">
                                <div class="card-layout">
                                  <section id="fact" class="card-table" fact-table>
                                    <div class="help">Aggiungi la Fact Table</div>
                                    <h6>FACT TABLE</h6>
                                    <div class="md-field" hidden>
                                      <input type="text" value=""/>
                                      <label for="searchColumns" class="">Ricerca</label>
                                    </div>
                                    <ul id="columns"></ul>
                                  </section>
                                  <section options>
                                    <span class="popupContent"><i class="material-icons md-18" columns>view_list</i><small class="popup">Colonna</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" filters>filter_list</i><small class="popup">Filtro</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" groupby>dynamic_feed</i><small class="popup">Raggruppamento</small></span>
                                    <span class="popupContent"><i class="material-icons md-18" metrics>show_chart</i><small class="popup">Metrica</small></span>
                                  </section>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>

                    <div class="relation">
                      <div class="icon-relation">
                        <!-- <span class="popupContent"><i id="add" class="material-icons md-24" add>add</i><small class="popup"></small></span> -->
                        <span class="popupContent"><i class="material-icons md-24" hierarchies>insert_link</i><small class="popup">Crea Relazione</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-left>flip</i><small class="popup">Left Join</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-right>flip</i><small class="popup">Right Join</small></span>
                        <span class="popupContent"><i class="material-icons md-24" hierarchies-remove>link_off</i><small class="popup">Rimuovi relazione</small></span>
                      </div>
                    </div>
                  </div>

                  <div class="structure">

                    <div class="actions">
                      <span class="popupContent"><i id="openReport" class="material-icons md-24">folder_open</i><small class="popup">Apri Report</small></span>
                      <span class="popupContent"><i id="saveReport" class="material-icons md-24 brown">save</i><small class="popup">Salva Report</small></span>
                    </div>
                  </div>

                </section>

              </section>

              <section class="page" data-step="3">
                <h2>Anteprima Report</h2>
                <section>
                  <h3>Impostazione Report</h3>
                  <h5>descrizione</h5>

                  <div class="layout">
                    <section title>
                      <!-- <h3>Page Title</h3>
                      <h5>Page Subtitle</h5> -->
                    </section>
                    <section params>
                      <div class="params column">
                        <template id="params">
                          <div class="cell-full md-field" data-param-id="" options='filters'>
                            <input type="search" id="" value="" onclick="this.select()"/>
                            <label for=""></label>
                            <div class="elements" options="filters" col="">
                              <ul class="filters" id=""></ul>
                              <section>
                                <button class="button dense raised">ok</button>
                              </section>
                            </div>

                          </div>
                        </template>

                      </div>

                    </section>
                    <section body>
                      <section table>
                        <table id="table-01" header-fixed>
                          <caption>caption table</caption>
                          <thead>
                            <tr head></tr>
                          </thead>

                          <tbody></tbody>

                          <tfoot>
                            <tr><td>Total</td></tr>
                            <tr>
                              <td>
                                <div class="cell-full md-field">
                                  <input id="search" type="search" autocomplete="off" onfocus="this.select()" />
                                  <label for="search">Ricerca</label>
                                </div>
                              </td>
                            </tr>
                            <tr class="tr-right">
                              <td>
                                <div info>
                                  <span>Elementi presenti</span>&nbsp;<span row-number></span>
                                </div>
                              </td>

                            </tr>
                          </tfoot>

                        </table>

                      </section>
                    </section>

                  </div>

                </section>

              </section>

            </div>

          </div>

        </div>

        <div id="controls">
          <div id="fabs">
            <button id="mdc-back" class="button dense raised">back</button>
            <div class="spacer"></div>
            <button id="mdc-next" class="button dense raised" hidden data-associated-page="1">FACT</button>
            <button id="mdc-preview-report" class="button dense raised" hidden data-associated-page="2" disabled>report preview</button>
          </div>
        </div>

        <div id="console">
          <div id="fabsConsole">
            <i class="material-icons md-18">info</i>
            <p></p>
          </div>
        </div>

      </div>
    </main>

    <div class="loader">
      <svg viewBox="0 0 32 32" width="32" height="32">
        <circle id="spinner" cx="16" cy="16" r="14" fill="none"></circle>
      </svg>
    </div>

    <script type="text/javascript" src="js/init.js" async></script>
  </body>
</html>

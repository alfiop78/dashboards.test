<!DOCTYPE html>
<html lang="it" dir="ltr">
	<head>
		<meta charset="utf-8">
		<link rel="icon" href="/images/favicon.png" type="image/png" />
		<meta name="theme-color" content="#70b1bb">
		<meta name="author" content="Pietrantuono Alfio">
		<link rel="stylesheet" type="text/css" href="/css/md-layout.css" />
		<link rel="stylesheet" type="text/css" href="/css/material-icons.css" />
		<link rel="stylesheet" type="text/css" href="/css/md-loader.css" />
		<link rel="stylesheet" type="text/css" href="/css/md-controls.css" />
		<link rel="stylesheet" type="text/css" href="/css/md-drawer.css" />
		<link rel="stylesheet" type="text/css" href="/css/md-inputs.css" />
		<link rel="stylesheet" type="text/css" href="/css/report-layout.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="/css/steps.css" />
		<script src="/js/Step.js"></script>
		<script src="/js/Query.js"></script>
		<script src="/js/Application.js"></script>
		<script src="/js/lib.js"></script>
		<script src="/js/Storage.js"></script>
		<script src="/js/Report.js"></script>
		<script src="/js/Page.js"></script>
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
		<title>Creazione Report</title>
	</head>
	<body>

		<dialog id="dialogTables">
			<section data-table-selected>
				<h4>Seleziona le colonne da includere per la tabella <span>da definire</span></h4>

				<div class="formulaDefine">

					<section class="formula">
						<div class="title">
							<h5>Colonne</h5><h6>Seleziona le colonne da includere</h6>
						</div>

						<div class="listContent">
							<div class="md-field" value>
								<input type="search" id="fieldSearch" value=""/>
								<label for="fieldSearch" class="">Ricerca</label>
							</div>
							<ul id="table-fieldList" class="list middleList"></ul>
						</div>
					</section>

					<section class="sql">
						<div class="md-field">
							<textarea id="sqlFormula" name="story" rows="5" cols="33" placeholder="SQL"></textarea>
							<!-- <label for="inputColumnFormula" class="">SQL</label> -->
						</div>
						<div class="md-field">
							<input type="text" id="inputColumnName" name="columnName" autocomplete="off" />
							<label for="inputColumnName" class="">Alias per la colonna</label>
						</div>
					</section>

				</div>

				<div class="dialog-buttons">
					<button type="button" name="cancel" class="md-button">annulla</button>
					<button id="btnSaveColumn" type="button" name="save" class="md-button" disabled>salva</button>
					<button id="btnColumnDone" type="button" name="done" class="md-button">ok</button>
				</div>
			</section>
		</dialog>

		<dialog id="dialogSaveReport">
			<div class="dialog-save-name">

				<div class="md-field">
					<input type="text" id="reportName" value=""/>
					<label for="reportName" class="">Titolo Report</label>
				</div>
			</div>

			<div class="dialog-buttons">
				<button type="button" name="cancel" class="md-button">annulla</button>
				<button id="btnReportSaveName" type="button" name="done" class="md-button">Salva</button>
			</div>

		</dialog>

		<dialog id="dialogFilter" class="dialog-filters">
			<section>
				<h4>Inserisci qui la condizione di filtro
				<div class="md-field">
					<input type="text" id="filter-name" value=""/>
					<label for="filter-name" class="">Nome</label>
				</div>

				<div class="formulaDefine">

					<section class="formula">
						<div class="title">
							<h5>Colonne</h5><h6>Seleziona le colonne da filtrare</h6>
						</div>

						<div class="listContent">
							<div class="md-field" value>
								<input type="search" id="fieldSearch" value=""/>
								<label for="fieldSearch" class="">Ricerca</label>
							</div>
							<ul id="filter-fieldList" class="list middleList"></ul>
						</div>
					</section>

					<section class="formula">
						<div class="title">
							<h5>SQL operatori</h5><h6>Scorri la lista degli operatori</h6>
						</div>

						<div class="listContent">
							<ul id="operatorList" class="list miniList">
								<li label="=">&equals;</li>
								<li label="<>">&lt;&gt;</li>
								<li label="<">&lt;</li>
								<li label=">">&gt;</li>
								<li label="<=">&lt;&equals;</li>
								<li label=">=">&gt;&equals;</li>
								<li label="BETWEEN">BETWEEN&nbsp;...&nbsp;AND&nbsp;</li>
								<li label="IN">IN</li>
								<li label="NOT IN">NOT IN</li>
								<li label="IS NULL">IS NULL</li>
								<li label="IS NOT NULL">IS NOT NULL</li>
							</ul>
						</div>
					</section>

					<!-- TODO: rinominare la .formula in section.... -->
					<section class="formula">
						<div class="title">
						  <h5>Lista valori</h5><h6>Seleziona i valori per creare il filtro</h6>
						</div>

						<div class="listContent">
							<div class="md-field" value>
								<input type="search" id="valuesSearch" value=""/>
								<label for="valuesSearch" class="">Ricerca</label>
							</div>
							<ul id="filter-valueList" class="list middleList"></ul>
						</div>
					</section>
				</div>

				<div class="formulaDefined">
					<div class="logicalOperator" id="logicalOperator">
						<span label='AND'>AND</span>
						<span label='OR'>OR</span>
						<span label='AND NOT'>AND NOT</span>
						<span label='OR NOT'>OR NOT</span>
						<span label='('>(</span>
						<span label=')'>)</span>
					</div>

					<div class="formulaContent">
						<div id="filterFormula" class="textarea">
				  
							<!-- <span class="formulaField">id</span>
							<span class="formulaOperator"> =</span>
							<span class="formulaValues">443</span> -->
							
						</div>
						<div class="formulaIcons">
							<span class="popupContent"><i class="material-icons md-18">clear</i><small class="popup">Rimuovi</small></span>
							<span class="popupContent"><i class="material-icons md-18">edit</i><small class="popup">Modifica</small></span>
						</div>
					</div>
				</div>

				<div class="dialog-buttons">
					<button type="button" name="cancel" class="md-button">annulla</button>
					<button id="btnFilterSave" type="button" name="save" class="md-button" disabled="true">salva</button>
					<button id="btnFilterDone" type="button" name="done" class="md-button">fine</button>
				</div>
			</section>
		</dialog>

		<dialog id="dialogMetric" class="dialog-metrics">
			<section>
				<h4>Inserisci qui la funzione per la metrica <span id="fieldName" class="highlight"></span></h4>

				<div class="name-alias">
					<div class="md-field">
						<input type="text" id="metric-name" value=""/>
						<label for="metric-name" class="">Nome</label>
					</div>

					<div class="md-field">
						<input type="text" id="alias-metric" value=""/>
						<label for="alias-metrics" class="">Alias</label>
					</div>
				</div>

				<div class="formulaDefine">
					<section class="formula">
						<h6>SQL Function</h6><small>Scorri la lista delle SQL function</small>
						<div class="listContent">
					  		<ul id="function-list" class="miniList">
								<li id="0" selected>SUM</li>
								<li id="1">COUNT</li>
								<li id="2">AVG</li>
								<li id="3">MAX</li>
								<li id="4">MIN</li>
							</ul>
						</div>
						<label class="mdc-checkbox">
							<input id="checkbox-distinct" type="checkbox" name="distinct-checkbox"/>
							<span>DISTINCT</span>
						</label>
					</section>

					<section class="filters">
						<h6>Filtri disponibili</h6><small>Filtri disponibili da associare alla metrica</small>
						<div class="md-field">
							<input type="search" id="searchExistsFilter_Metric" value=""/>
							<label for="searchExistsFilter_Metric" class="">Ricerca</label>
						</div>
						<div id="existsFilter_Metric">
							<ul id="ul-existsFilter_Metric" class="overflowList"></ul>
						</div>
					</section>

					<!-- <section class="filters">
					<h6>Filtri</h6><small>Filtri associati alla metrica</small>
					<div class="md-field">
					  <input type="search" id="searchFilter-metric" value=""/>
					  <label for="searchFilter-metric" class="">Ricerca</label>
					</div>
					<div id="filter-metric">
					  <ul id="ul-filter-metric" class="overflowList"></ul>
					</div>
					</section> -->
				</div>

				<div class="dialog-buttons">
					<button type="button" name="cancel" class="md-button">annulla</button>
					<button id="btnMetricDone" type="button" name="done" class="md-button">ok</button>
				</div>
			</section>

			<!-- <div> -->
			<!-- TODO: si può aggiungere in futuro per filtri più complessi -->
			<!-- <textarea id="sql-filter" name="sql" rows="5" cols="33" placeholder="Inserisci qui la condizione di filtro"></textarea>
			</div> -->
		</dialog>

		<main>
			<div id="drawer">
				<section class="account"><h5>user</h5><i class="material-icons md-light">person</i></section>
				<nav>
					<a href="/mapping/" title="Mapping"><i class="material-icons md-18">settings</i><span>Mapping</span></a>
				</nav>
			</div>

			<header>
				<div class="nav-button"> <!-- codelab-nav-button-->
					<a href="/" id="arrow-back"><i class="material-icons md-light">close</i></a>
					<a href="#" id="menu" onclick="App.menu()"><i class="material-icons md-light">menu</i></a>
				</div>
				<h1 class="title">Creazione report</h1>
			</header>

			<div id="container" data-page="1">
				<div id="content">
					<div id="body" hidden>
						<h3>title</h3>
						<h5>descrizione</h5>

						<div class="actions">
							<span class="popupContent"><i id="btnProcessReport" class="material-icons md-24">folder_open</i><small class="popup">Crea FX</small></span>
						</div>
						<div class="lists">
							<div class="absList" id="reportProcessList" hidden>
								<div class="md-field">
									<input type="search" id="searchReportProcess" value=""/>
									<label for="searchReportProcess" class="">Ricerca</label>
								</div>
								<ul id="reportsProcess"></ul>
							</div>
						</div>
	  
						<template id="templateListField">
							<div class="element" name="">
								<li class="elementSearch" label=""></li>
							</div>
						</template>

						<template id="tmpl_ulList">
							<ul data-id="fields-filter" class="overflowList" hidden></ul>
							<ul data-id="fields-dimensions" class="overflowList" hidden></ul>
							<ul data-id="fields-hierarchies" class="overflowList" hidden></ul>
							<ul data-id="fields-column" class="overflowList" hidden></ul>
							<ul data-id="fields-tables" class="overflowList" hidden></ul>
							<ul data-id="fields-metric" class="overflowList" hidden></ul>
						</template>

						<div id="step" class="steps" data-step="1">

							<div class="hr">
								<div class="btn"><button id="stepPrevious" class="md-button">previous</button></div>

								<div class="overflow">
									<div id="stepTranslate">
										<section class="step" data-step="1" selected>
											<section class="pageContent">
												<h4>Cubo e Dimensioni</h4><h6>Seleziona il cubo e le dimensioni su cui creare il report</h6>
												<div class="stepLayout">

													<section class="sectionLists">
														<h5>Cubi</h5>
														<div class="md-field">
															<input type="search" id="searchCube" value=""/>
															<label for="searchCube" class="">Ricerca</label>
														</div>
														<div id="cubeList">
															<ul id="cubes" class="overflowList"></ul>
														</div>
													</section>

													<section class="sectionLists">
														<h5>Dimensioni</h5>
														<div class="md-field">
															<input type="search" id="searchDimension" value=""/>
															<label for="searchDimension" class="">Ricerca</label>
														</div>
														<div id="dimensionList">
															<!-- <ul data-id="fields-dimensions" class="overflowList" hidden></ul> -->
														</div>
													</section>
												</div>
											</section>
										</section>

										<section class="step" data-step="2">
											<section class="pageContent">
												<h4>Campi</h4><h6>Dopo aver selezionato la gerarchia, seleziona le tabelle per aggiungere le colonne</h6>

												<div class="stepLayout">

													<section class="sectionLists">
														<h5>Gerarchie</h5>
														<div class="md-field">
															<input type="search" id="searchTables-hierarchies" value=""/>
															<label for="searchTables-hierarchies" class="">Ricerca</label>
														</div>
														<div id="tableList-hierarchies">
															<!-- <ul data-id="fields-hierarchies" class="overflowList" hidden></ul> -->
														</div>
													</section>

													<section class="sectionLists" id="sectionFields-tables">
														<h5>Tabelle disponibili</h5>
														<div class="md-field">
															<input type="search" id="searchTables" value=""/>
															<label for="searchTables" class="">Ricerca</label>
														</div>
														<div id="fieldList-tables"><!-- qui viene inserito il template tmpl_ulList--></div>
													</section>
												</div>
											</section>
										</section>

										<section class="step" data-step="3">
											<section class="pageContent">
												<h4>Filtri</h4><h6>Aggiungi i filtri da applicare al report o alle metriche</h6>

												<div class="stepLayout"> 

													<section class="sectionLists">
														<h5>Tabelle</h5>
														<div class="md-field">
															<input type="search" id="searchTables-filter" value=""/>
															<label for="searchTables-filter" class="">Ricerca</label>
														</div>
														<div id="tableList-filter"><!-- qui viene inserito il template tmpl_ulList con data-id=fields-tables che conterrà l'elenco delle tabelle--></div>
													</section>

													<section class="sectionLists" id="sectionFields-filter">
														<h5>Filtri del Report</h5>
														<div class="md-field">
															<input type="search" id="searchFilters" value=""/>
															<label for="searchFilters" class="">Ricerca</label>
														</div>
														<div id="filters">
															<ul id="createdFilters" class="overflowList"></ul>
														</div>
													</section>

													<section class="sectionLists" id="sectionFields-existsfilter">
														<h5>Filtri esistenti</h5>
														<div class="md-field">
															<input type="search" id="searchExistsFilter" value=""/>
															<label for="searchExistsFilter" class="">Ricerca</label>
														</div>
														<div id="fieldList-existFilter"><!-- qui viene inserito il template tmpl_ulList con data-id=fields-filter che conterrà l'elenco dei filtri per la tabella selezionata--></div>
													</section>
												</div>
											</section>
										</section>

										<section class="step" data-step="4">
											<section class="pageContent">
												<h4>Step 4</h4><h6>Seleziona le metriche da aggiungere al Report</h6>
												<div class="stepLayout">

													<section class="sectionLists">
														<h5>Tabelle</h5>
														<div class="md-field">
															<input type="search" id="searchTables-metric" value=""/>
															<label for="searchTables-metric" class="">Ricerca</label>
														</div>
														<div id="tableList-metric">
															<ul id="tables-metric" class="overflowList"></ul>
														</div>
													</section>

													<section class="sectionLists" id="sectionFields-metric">
														<h5>Metriche impostate</h5>
														<div class="md-field">
															<input type="search" id="searchMetrics" value=""/>
															<label for="searchMetrics" class="">Ricerca</label>
														</div>
														<div id="metrics"></div>
													</section>

													<section class="sectionLists" id="sectionFields-existsMetric">
														<h5>Metriche esistenti</h5>
														<div class="md-field">
															<input type="search" id="searchExistsMetric" value=""/>
															<label for="searchExistsMetric" class="">Ricerca</label>
														</div>
														<div id="existsMetric">
															<ul id="exists-metric" class="overflowList"></ul>
														</div>
													</section>
												</div>
											</section>
										</section>
									</div>
								</div>

								<div class="btn">
									<button id="stepNext" class="md-button">Next</button>
									<button id="stepDone" class="md-button">Salva</button>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div id="controls">
					<div id="fabs">
						<button id="mdcBack" class="button dense raised">da definire</button>
						<div class="spacer"></div>
						<button id="mdcReportSave" class="button dense raised done" hidden>salva report</button>
						<button id="mdc-dashboard-layout" class="button dense raised done" hidden>CREA LAYOUT</button>
					</div>
				</div>

				<div id="console">
					<div id="fabsConsole">
						<i class="material-icons md-18">info</i>
						<p></p>
					</div>
				</div>
			</div>
		</main>

		<div class="loader">
			<svg viewBox="0 0 32 32" width="32" height="32">
				<circle id="spinner" cx="16" cy="16" r="14" fill="none"></circle>
			</svg>
		</div>
		<script type="text/javascript" src="js/init.js" async></script>
	</body>
</html>
